{{- if .Values.cilium }}
{{- if .Values.netPolicies }}
{{- range .Values.netPolicies }}
  {{- if eq .name "world" }}
apiVersion: cilium.io/v2
kind: CiliumNetworkPolicy
metadata:
  name: {{ $.Release.Name }}-world-cnp-egress
  namespace: {{ $.Values.processingNamespace | default $.Release.Namespace }}
spec:
  endpointSelector:
    matchLabels:
      k8s:selector.cilium/release: {{ $.Release.Name }}
  egress:
    - toEntities:
        - world
  {{- end }}
{{- end }}
{{- end }}
{{- end }}